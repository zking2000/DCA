âœ… æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šA. Yes

â¸»

ğŸ’¡ ä¸€ã€é¢˜ç›®å›é¡¾

é—®é¢˜ï¼š
ä½ çš„ç»„ç»‡ä½¿ç”¨é›†ä¸­å¼æ—¥å¿—ç³»ç»Ÿï¼ˆä¾‹å¦‚ Splunkï¼‰ã€‚

æ–¹æ¡ˆï¼š
åœ¨ daemon.json æ–‡ä»¶ä¸­è®¾ç½® log-driver å’Œ log-opts ä¸ºå¯¹åº”æ—¥å¿—æ–¹æ¡ˆï¼ˆSplunkï¼‰çš„å€¼ã€‚

è¿™èƒ½å¦é…ç½® Docker å®¹å™¨æŠŠæ—¥å¿—å¯¼å‡ºåˆ°è¯¥æ—¥å¿—ç³»ç»Ÿï¼Ÿ

â¸»

âœ… äºŒã€æ­£ç¡®ç­”æ¡ˆï¼šYes

ç¡®å®å¯ä»¥é€šè¿‡åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹é…ç½®æ–‡ä»¶ /etc/docker/daemon.json ä¸­æŒ‡å®šï¼š
	â€¢	log-driver â†’ æ—¥å¿—é©±åŠ¨ç¨‹åºç±»å‹ï¼ˆä¾‹å¦‚ splunkï¼‰
	â€¢	log-opts â†’ é©±åŠ¨çš„ç›¸å…³é…ç½®é¡¹ï¼ˆä¾‹å¦‚ tokenã€endpoint ç­‰ï¼‰

è¿™æ ·å°±èƒ½å°†æ‰€æœ‰å®¹å™¨çš„æ—¥å¿—è‡ªåŠ¨å‘é€åˆ°é›†ä¸­å¼æ—¥å¿—ç³»ç»Ÿã€‚

â¸»

ğŸ§© ä¸‰ã€ç¤ºä¾‹é…ç½®ï¼ˆSplunk æ—¥å¿—é©±åŠ¨ï¼‰

åœ¨å®¿ä¸»æœºä¸Šç¼–è¾‘æ–‡ä»¶ï¼š
/etc/docker/daemon.json

{
  "log-driver": "splunk",
  "log-opts": {
    "splunk-url": "https://splunk.example.com:8088",
    "splunk-token": "A1B2C3D4-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
    "splunk-insecureskipverify": "true",
    "splunk-format": "json"
  }
}

ä¿å­˜åé‡å¯ Docker å®ˆæŠ¤è¿›ç¨‹ï¼š

sudo systemctl restart docker

ä»æ­¤ä»¥åï¼Œæ‰€æœ‰æ–°å¯åŠ¨çš„å®¹å™¨ä¼šä½¿ç”¨ Splunk æ—¥å¿—é©±åŠ¨ï¼ŒæŠŠæ—¥å¿—ç›´æ¥æ¨é€åˆ°æŒ‡å®š Splunk HTTP Event Collector (HEC) ç«¯ç‚¹ã€‚

â¸»

ğŸ§± å››ã€å¯é€‰ï¼šä¸ºå•ä¸ªå®¹å™¨æŒ‡å®šæ—¥å¿—é©±åŠ¨ï¼ˆè¦†ç›–å…¨å±€ï¼‰

å¦‚æœåªæƒ³é’ˆå¯¹æŸä¸ªå®¹å™¨ï¼š

docker run -d \
  --log-driver=splunk \
  --log-opt splunk-url=https://splunk.example.com:8088 \
  --log-opt splunk-token=A1B2C3... \
  --log-opt splunk-format=json \
  nginx


â¸»

âš™ï¸ äº”ã€å¸¸è§å¯ç”¨æ—¥å¿—é©±åŠ¨ç±»å‹ï¼ˆlog-driverï¼‰

é©±åŠ¨å	è¯´æ˜
json-file	é»˜è®¤é©±åŠ¨ï¼Œæ—¥å¿—å†™å…¥å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿ
syslog	å‘é€æ—¥å¿—åˆ°æœ¬åœ°æˆ–è¿œç¨‹ syslog
journald	é›†æˆ systemd çš„ journald
gelf	å‘é€æ—¥å¿—åˆ° Graylog / Logstash
fluentd	å‘é€æ—¥å¿—åˆ° Fluentd
splunk	å‘é€æ—¥å¿—åˆ° Splunk HTTP Event Collector
awslogs	å‘é€æ—¥å¿—åˆ° AWS CloudWatch
none	ä¸è®°å½•æ—¥å¿—


â¸»

âœ… å…­ã€æ€»ç»“

é¡¹ç›®	æ˜¯å¦æ­£ç¡®	è¯´æ˜
ä¿®æ”¹ daemon.json è®¾ç½® log-driver/log-opts ä¸º Splunk	âœ… æ˜¯	é…ç½®å…¨å±€æ—¥å¿—è¾“å‡ºç›®æ ‡
æ˜¯å¦èƒ½æŠŠå®¹å™¨æ—¥å¿—å¯¼å‡ºåˆ° Splunk	âœ… æ˜¯	å®¹å™¨æ—¥å¿—å°†å‘é€åˆ° Splunk HEC
æ˜¯å¦éœ€è¦é‡å¯ Docker å®ˆæŠ¤è¿›ç¨‹	âœ… æ˜¯	æ”¹åŠ¨æ‰ä¼šç”Ÿæ•ˆ


â¸»

âœ… æœ€ç»ˆç­”æ¡ˆï¼šA. Yes

é€šè¿‡åœ¨ daemon.json æ–‡ä»¶ä¸­è®¾ç½® log-driver ä¸º splunk å¹¶æä¾›ç›¸åº” log-opts å‚æ•°ï¼Œ
Docker å¯ä»¥å°†å®¹å™¨æ—¥å¿—ç›´æ¥å¯¼å‡ºåˆ°é›†ä¸­å¼æ—¥å¿—ç³»ç»Ÿï¼ˆä¾‹å¦‚ Splunkï¼‰ã€‚