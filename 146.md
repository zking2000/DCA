âœ… æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šB. No

â¸»

ğŸ’¡ ä¸€ã€é¢˜ç›®å›é¡¾

Question:
Is this a way to configure the Docker Engine to use a registry without a trusted TLS certificate?

Solution:
â€œSet IGNORE_TLS in the daemon.json configuration file.â€

Answer: B. No

â¸»

ğŸ§± äºŒã€ä¸ºä»€ä¹ˆç­”æ¡ˆæ˜¯ No

å› ä¸ºï¼š
ğŸ‘‰ IGNORE_TLS å¹¶ä¸æ˜¯ Docker çš„åˆæ³•é…ç½®é¡¹ã€‚
Docker å¼•æ“å¹¶ä¸å­˜åœ¨ IGNORE_TLS è¿™æ ·çš„å‚æ•°æˆ–ç¯å¢ƒå˜é‡ã€‚

Docker è®¿é—®ç§æœ‰ä»“åº“ï¼ˆregistryï¼‰æ—¶ï¼Œå¦‚æœä»“åº“æ²¡æœ‰å—ä¿¡ä»»çš„ TLS è¯ä¹¦ï¼ˆä¾‹å¦‚è‡ªç­¾åè¯ä¹¦ï¼‰ï¼Œ
æ­£ç¡®çš„é…ç½®æ–¹å¼æ˜¯ä½¿ç”¨ï¼š

{
  "insecure-registries": ["myregistry.example.com:5000"]
}

è€Œä¸æ˜¯ IGNORE_TLSã€‚

â¸»

âš™ï¸ ä¸‰ã€æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ insecure-registries

âœ… ä¿®æ”¹ /etc/docker/daemon.jsonï¼š

{
  "insecure-registries": ["myregistry.example.com:5000"]
}

âœ… ç„¶åé‡å¯ Dockerï¼š

sudo systemctl restart docker


â¸»

ğŸ§© å››ã€è¿™é¡¹é…ç½®çš„ä½œç”¨

å¯ç”¨ insecure-registries åï¼š
	â€¢	Docker å…è®¸é€šè¿‡ HTTP æˆ–è‡ªç­¾å HTTPS ä¸è¯¥ä»“åº“é€šä¿¡ï¼›
	â€¢	å¿½ç•¥å¯¹è¯¥ registry çš„è¯ä¹¦ä¿¡ä»»éªŒè¯ï¼›
	â€¢	ä½†ä»…å¯¹åˆ—å‡ºçš„ registry ç”Ÿæ•ˆï¼Œå…¶ä»–ä»éœ€ä½¿ç”¨å—ä¿¡ä»»è¯ä¹¦ã€‚

â¸»

ğŸ§  äº”ã€é¢å¤–è¯´æ˜ï¼šå®‰å…¨è­¦å‘Š

âš ï¸ ä½¿ç”¨ insecure-registries ä»…é€‚ç”¨äºæµ‹è¯•ç¯å¢ƒæˆ–å†…éƒ¨ç½‘ç»œã€‚

å› ä¸ºè¿™æ ·åšç›¸å½“äºå‘Šè¯‰ Dockerï¼š
â€œæˆ‘çŸ¥é“è¿™ä¸ªä»“åº“æ²¡è¯ä¹¦ä¹Ÿæ²¡å…³ç³»ï¼Œåˆ«æ£€æŸ¥ TLSã€‚â€

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”ä½¿ç”¨ï¼š
	â€¢	è‡ªç­¾åè¯ä¹¦å¹¶æ‰‹åŠ¨ä¿¡ä»»ï¼›
	â€¢	æˆ–ä½¿ç”¨å—ä¿¡ä»» CA ç­¾å‘çš„è¯ä¹¦ã€‚

â¸»

âœ… å…­ã€æ€»ç»“

é…ç½®é¡¹	æ˜¯å¦å­˜åœ¨	åŠŸèƒ½
IGNORE_TLS	âŒ ä¸å­˜åœ¨	æ— æ•ˆé…ç½®
insecure-registries	âœ… å­˜åœ¨	å…è®¸è¿æ¥æœªå—ä¿¡ä»»æˆ–è‡ªç­¾å registry


â¸»

âœ… æœ€ç»ˆç­”æ¡ˆï¼šB. No

Docker æ²¡æœ‰ IGNORE_TLS å‚æ•°ã€‚
è¦å…è®¸è¿æ¥ä¸å—ä¿¡ä»»çš„ registryï¼Œ
åº”åœ¨ daemon.json ä¸­ä½¿ç”¨ insecure-registries å­—æ®µã€‚