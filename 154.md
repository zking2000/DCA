✅ 正确答案：A 和 E

⸻

💡 一、题目回顾

Question:
What is the difference between the ADD and COPY Dockerfile instructions? (Select two.)

Options:
A. ADD supports remote URL handling while COPY does not.
B. COPY supports compression format handling while ADD does not.
C. COPY supports regular expression handling while ADD does not.
D. ADD supports regular expression handling while COPY does not.
E. ADD supports compression format handling while COPY does not.

✅ Answer: A, E

⸻

🧱 二、核心区别总结

特性	COPY	ADD
拷贝本地文件	✅ 支持	✅ 支持
解压 .tar, .tar.gz, .tgz, .bz2 等文件	❌ 不支持	✅ 自动解压
处理远程 URL（HTTP/HTTPS）	❌ 不支持	✅ 支持
推荐使用场景	简单文件复制	需要解压或从 URL 下载文件时
是否推荐用于生产	✅ 是（更明确、无副作用）	⚠️ 谨慎（行为多样，不易维护）


⸻

⚙️ 三、详细解释选项

✅ A. ADD supports remote URL handling while COPY does not.

正确 ✅
ADD 可以从远程 URL 下载内容，例如：

ADD https://example.com/app.tar.gz /tmp/

而 COPY 只能从**构建上下文（本地文件系统）**中复制文件：

COPY ./app /usr/src/app


⸻

✅ E. ADD supports compression format handling while COPY does not.

正确 ✅
ADD 会自动解压 .tar, .tar.gz, .tar.bz2 文件，例如：

ADD app.tar.gz /usr/src/app

会自动将内容解压到 /usr/src/app。

而 COPY 则不会解压：

COPY app.tar.gz /usr/src/app

结果是文件原样复制。

⸻

❌ 其他选项错误原因

选项	是否正确	原因
B. COPY supports compression format handling	❌ 否	COPY 不会解压压缩包
C/D. regular expression handling	❌ 否	Dockerfile 不支持正则，只支持路径匹配和通配符（glob）


⸻

🧠 四、最佳实践

官方建议（Dockerfile Best Practices）：

🔸 优先使用 COPY 而不是 ADD
除非确实需要 ADD 的自动解压或 URL 下载特性。

原因：
	•	ADD 行为复杂且隐含副作用；
	•	COPY 更可控、更可预测。

⸻

✅ 五、总结

特性	ADD	COPY
复制本地文件	✅	✅
从 URL 下载文件	✅	❌
自动解压压缩包	✅	❌
推荐用于生产	⚠️ 否	✅ 是


⸻

✅ 最终答案：A, E

ADD 支持远程 URL 处理和压缩包自动解压，而 COPY 不支持这些功能。