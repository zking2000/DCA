æˆ‘ä»¬æ¥çœ‹è¿™é“é¢˜å’Œå›¾ä¸­çš„ NetworkPolicyã€‚
å›¾ä¸­çš„ YAML å†…å®¹å¤§è‡´æ˜¯ï¼š

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: dca
  namespace: default
spec:
  podSelector:
    matchLabels:
      tier: backend
  ingress:
  - from:
    - podSelector:
        matchLabels:
          tier: api


â¸»

ğŸ§© è§£é‡Š NetworkPolicy çš„å«ä¹‰
	â€¢	podSelector: tier=backend
â†’ è¿™æ¡ NetworkPolicy åªä½œç”¨åœ¨å¸¦æœ‰ tier=backend æ ‡ç­¾çš„ Pod ä¸Šã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå®šä¹‰äº†ã€Œbackend Pod çš„å…¥ç«™ï¼ˆingressï¼‰è§„åˆ™ã€ã€‚
	â€¢	ingress.from.podSelector.tier=api
â†’ å…è®¸æ¥è‡ªå¸¦æœ‰ tier=api æ ‡ç­¾çš„ Pod çš„å…¥ç«™æµé‡ã€‚

â¸»

ğŸ§  å› æ­¤é€»è¾‘ä¸Šæ˜¯ï¼š

è¿™æ¡è§„åˆ™è¡¨ç¤ºï¼š

â€œå…è®¸ tier=api çš„ Pod è®¿é—® tier=backend çš„ Podã€‚â€

è€Œå…¶ä»– Podï¼ˆå¦‚ tier=frontendï¼‰å°†æ— æ³•è®¿é—® tier=backendã€‚

â¸»

â“é¢˜ç›®é—®ï¼š

ä¸€ä¸ªå¸¦æœ‰ tier=backend æ ‡ç­¾çš„ Pod å‘èµ·è¯·æ±‚ï¼Œç›®æ ‡æ˜¯å¸¦æœ‰ tier=frontend æ ‡ç­¾çš„ Podï¼ŒNetworkPolicy æ˜¯å¦ä¼š BLOCK è¿™æ¡æµé‡ï¼Ÿ

â¸»

âœ… åˆ†æ
	â€¢	NetworkPolicy æ˜¯ åªæ§åˆ¶å…¥ç«™æµé‡ (ingress)ï¼Œ
ä¸æ§åˆ¶å‡ºç«™æµé‡ (egress)ï¼Œé™¤éæ˜¾å¼å®šä¹‰äº† egressã€‚
	â€¢	å½“å‰ç­–ç•¥ä»…é™åˆ¶ backend Pod çš„å…¥ç«™æµé‡ï¼Œå¹¶æœªé™åˆ¶å…¶å‡ºç«™ã€‚

å› æ­¤ï¼š
	â€¢	ä» backend â†’ frontend æ˜¯ å‡ºç«™æµé‡ï¼›
	â€¢	å½“å‰ç­–ç•¥ä¸­æ²¡æœ‰ä»»ä½• egress é™åˆ¶ï¼›
	â€¢	æ‰€ä»¥è¿™ç±»å‡ºç«™æµé‡ ä¸ä¼šè¢«é˜»æ­¢ã€‚

â¸»

âœ… ç­”æ¡ˆï¼šB. No

NetworkPolicy ä¸ä¼šé˜»æ­¢è¿™æ¡æµé‡ã€‚
å› ä¸ºå®ƒåªé™åˆ¶ ingress åˆ° backendï¼Œä¸é™åˆ¶ backend å‘å‡ºçš„æµé‡ã€‚